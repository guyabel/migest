<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimation of bilateral migrant flows from bilateral migrant stocks using demographic accounting approaches — ffs_demo • migest</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Estimation of bilateral migrant flows from bilateral migrant stocks using demographic accounting approaches — ffs_demo" />
<meta property="og:description" content="Estimates migrant transitions flows between two sequential migrant stock tables. Replaces old ffs." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">migest</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/guyabel/migest/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimation of bilateral migrant flows from bilateral migrant stocks using demographic accounting approaches</h1>
    <small class="dont-index">Source: <a href='https://github.com/guyabel/migest/blob/master/R/ffs_demo.R'><code>R/ffs_demo.R</code></a></small>
    <div class="hidden name"><code>ffs_demo.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Estimates migrant transitions flows between two sequential migrant stock tables. Replaces old <code>ffs</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>ffs_demo</span><span class='op'>(</span>
  m1 <span class='op'>=</span> <span class='cn'>NULL</span>,
  m2 <span class='op'>=</span> <span class='cn'>NULL</span>,
  b_por <span class='op'>=</span> <span class='cn'>NULL</span>,
  d_por <span class='op'>=</span> <span class='cn'>NULL</span>,
  m <span class='op'>=</span> <span class='cn'>NULL</span>,
  stayer_assumption <span class='op'>=</span> <span class='cn'>TRUE</span>,
  match_global <span class='op'>=</span> <span class='st'>"before-demo-adjust"</span>,
  match_pob_tot_method <span class='op'>=</span> <span class='st'>"rescale"</span>,
  birth_non_negative <span class='op'>=</span> <span class='cn'>TRUE</span>,
  death_method <span class='op'>=</span> <span class='st'>"proportion"</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>m1</th>
      <td><p>Matrix of migrant stock totals at time <em>t</em>. Rows in the matrix correspond to place of birth and columns to place of residence at time <em>t</em></p></td>
    </tr>
    <tr>
      <th>m2</th>
      <td><p>Matrix of migrant stock totals at time <em>t</em>+1. Rows in the matrix correspond to place of birth and columns to place of residence at time <em>t</em>+1.</p></td>
    </tr>
    <tr>
      <th>b_por</th>
      <td><p>Vector of the number of births between time <em>t</em> and <em>t</em>+1 in each region.</p></td>
    </tr>
    <tr>
      <th>d_por</th>
      <td><p>Vector of the number of deaths between time <em>t</em> and <em>t</em>+1 in each region.</p></td>
    </tr>
    <tr>
      <th>m</th>
      <td><p>Matrix of auxiliary data. By default set to 1 for all origin-destination combinations.</p></td>
    </tr>
    <tr>
      <th>stayer_assumption</th>
      <td><p>Logical value to indicate whether to use <code><a href='ipf3.html'>ipf3</a></code> or <code><a href='ipf3_qi.html'>ipf3_qi</a></code> to estimate flows. By default uses <code>ipf3_qi</code>, i.e. is set to <code>TRUE</code>. The <code>ipf</code> function is useful for replicating method of Azoze and Raferty.</p></td>
    </tr>
    <tr>
      <th>match_global</th>
      <td><p>Character string used to indicate whether to balance the change in stocks totals with the changes in births and deaths. Only applied when <code>match_pob_tot_method</code> is either <code>rescale</code> or <code>rescale-adjust-zero-fb</code>. By default uses <code>after-demo-adjust</code> rather than <code>before-demo-adjust</code> which I think minimises risk of negative values.</p></td>
    </tr>
    <tr>
      <th>match_pob_tot_method</th>
      <td><p>Character string passed to <code>method</code> argument in <code>match_pob_tot</code> to ensure place of birth margins in stock tables match.</p></td>
    </tr>
    <tr>
      <th>birth_non_negative</th>
      <td><p>Logical value passed to <code>non_negative</code> argument in <code>birth_mat</code>.</p></td>
    </tr>
    <tr>
      <th>death_method</th>
      <td><p>Character string passed to <code>method</code> argument in <code>death_mat</code>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical value to indicate the print the parameter estimates at each iteration of the various IPF routines. By default <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passes to <code><a href='ipf3_qi.html'>ipf3_qi</a></code> or <code><a href='ipf3.html'>ipf3</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Estimates migrant transitions flows between two sequential migrant stock tables using various methods. See the example section for possible variations on estimation methods.</p>
<p>Returns a <code>list</code> object with:</p>
<dt>mu </dt><dd><p>Array of indirect estimates of origin-destination matrices by place of birth.</p></dd>
<dt>it </dt><dd><p>Iteration count.</p></dd>
<dt>tol </dt><dd><p>Tolerance level at final iteration.</p></dd>
<dt>y </dt><dd><p>Array of indirect estimates of origin-destination matrices by place of birth with additional rows and columns for births, deaths and moves to other regions.</p></dd>
<dt>...</dt><dd><p>Slots to record which estimation method was used (as set by arguments above)</p></dd>
<dt>od_flow </dt><dd><p>Matrix of estimated origin-destination flows</p></dd>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Abel and Cohen (2019) Bilateral international migration flow estimates for 200 countries <em>Scientific Data</em> 6 (1), 1-13</p>
<p>Azose &amp; Raftery (2019) Estimation of emigration, return migration, and transit migration between all pairs of countries <em>Proceedings of the National Academy of Sciences</em> 116 (1) 116-122</p>
<p>Abel, G. J. (2018). Estimates of Global Bilateral Migration Flows by Gender between 1960 and 2015. <em>International Migration Review</em> 52 (3), 809–852.</p>
<p>Abel, G. J. and Sander, N. (2014). Quantifying Global International Migration Flows. <em>Science</em>, 343 (6178) 1520-1522</p>
<p>Abel, G. J. (2013). Estimating Global Migration Flow Tables Using Place of Birth. <em>Demographic Research</em> 28, (18) 505-546</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='ffs_diff.html'>ffs_diff</a></code>, <code><a href='ffs_rates.html'>ffs_rates</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Guy J. Abel</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>##</span>
<span class='co'>## without births and deaths over period</span>
<span class='co'>##</span>
<span class='co'># data as in papers</span>
<span class='va'>s1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1000</span>, <span class='fl'>100</span>, <span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>55</span>, <span class='fl'>555</span>, <span class='fl'>50</span>, <span class='fl'>5</span>, <span class='fl'>80</span>, <span class='fl'>40</span>, <span class='fl'>800</span>, <span class='fl'>40</span>, <span class='fl'>20</span>, <span class='fl'>25</span>, <span class='fl'>20</span>, <span class='fl'>200</span><span class='op'>)</span>,
             nrow <span class='op'>=</span> <span class='fl'>4</span>, ncol <span class='op'>=</span> <span class='fl'>4</span>, byrow <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>s2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>950</span>, <span class='fl'>100</span>, <span class='fl'>60</span>, <span class='fl'>0</span>, <span class='fl'>80</span>, <span class='fl'>505</span>, <span class='fl'>75</span>, <span class='fl'>5</span>, <span class='fl'>90</span>, <span class='fl'>30</span>, <span class='fl'>800</span>, <span class='fl'>40</span>, <span class='fl'>40</span>, <span class='fl'>45</span>, <span class='fl'>0</span>, <span class='fl'>180</span><span class='op'>)</span>,
             nrow <span class='op'>=</span> <span class='fl'>4</span>, ncol <span class='op'>=</span> <span class='fl'>4</span>, byrow <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>b</span> <span class='op'>&lt;-</span> <span class='va'>d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>4</span><span class='op'>)</span>
<span class='va'>reg</span> <span class='op'>&lt;-</span> <span class='va'>LETTERS</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/dimnames.html'>dimnames</a></span><span class='op'>(</span><span class='va'>s1</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/dimnames.html'>dimnames</a></span><span class='op'>(</span><span class='va'>s2</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>pob <span class='op'>=</span> <span class='va'>reg</span>, por <span class='op'>=</span> <span class='va'>reg</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>d</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>reg</span>
<span class='va'>s1</span>; <span class='va'>s2</span>; <span class='va'>b</span>; <span class='va'>d</span>
</div><div class='output co'>#&gt;    por
#&gt; pob    A   B   C   D
#&gt;   A 1000 100  10   0
#&gt;   B   55 555  50   5
#&gt;   C   80  40 800  40
#&gt;   D   20  25  20 200</div><div class='output co'>#&gt;    por
#&gt; pob   A   B   C   D
#&gt;   A 950 100  60   0
#&gt;   B  80 505  75   5
#&gt;   C  90  30 800  40
#&gt;   D  40  45   0 180</div><div class='output co'>#&gt; A B C D 
#&gt; 0 0 0 0 </div><div class='output co'>#&gt; A B C D 
#&gt; 0 0 0 0 </div><div class='input'>
<span class='co'># demographic research and science paper example</span>
<span class='fu'>ffs_demo</span><span class='op'>(</span>m1 <span class='op'>=</span> <span class='va'>s1</span>, m2 <span class='op'>=</span> <span class='va'>s2</span>, b_por <span class='op'>=</span> <span class='va'>b</span>, d_por <span class='op'>=</span> <span class='va'>d</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $flow
#&gt; , , pob = A
#&gt; 
#&gt;     dest
#&gt; orig     A   B  C D
#&gt;    A 950.5   0 50 0
#&gt;    B   0.0 100  0 0
#&gt;    C   0.0   0 10 0
#&gt;    D   0.0   0  0 0
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;     dest
#&gt; orig  A   B  C D
#&gt;    A 55   0  0 0
#&gt;    B 25 505 25 0
#&gt;    C  0   0 50 0
#&gt;    D  0   0  0 5
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;     dest
#&gt; orig  A  B   C  D
#&gt;    A 80  0   0  0
#&gt;    B 10 30   0  0
#&gt;    C  0  0 800  0
#&gt;    D  0  0   0 40
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;     dest
#&gt; orig  A  B C   D
#&gt;    A 20  0 0   0
#&gt;    B  0 25 0   0
#&gt;    C 10 10 0   0
#&gt;    D 10 10 0 180
#&gt; 
#&gt; 
#&gt; $y
#&gt; , , pob = A
#&gt; 
#&gt;          dest
#&gt; orig          A   B  C D death outside
#&gt;   A       950.5   0 50 0     0       0
#&gt;   B         0.0 100  0 0     0       0
#&gt;   C         0.0   0 10 0     0       0
#&gt;   D         0.0   0  0 0     0       0
#&gt;   birth     0.0   0  0 0     0       0
#&gt;   outside   0.0   0  0 0     0       0
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;          dest
#&gt; orig       A   B  C D death outside
#&gt;   A       55   0  0 0     0       0
#&gt;   B       25 505 25 0     0       0
#&gt;   C        0   0 50 0     0       0
#&gt;   D        0   0  0 5     0       0
#&gt;   birth    0   0  0 0     0       0
#&gt;   outside  0   0  0 0     0       0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;          dest
#&gt; orig       A  B   C  D death outside
#&gt;   A       80  0   0  0     0       0
#&gt;   B       10 30   0  0     0       0
#&gt;   C        0  0 800  0     0       0
#&gt;   D        0  0   0 40     0       0
#&gt;   birth    0  0   0  0     0       0
#&gt;   outside  0  0   0  0     0       0
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;          dest
#&gt; orig       A  B C   D death outside
#&gt;   A       20  0 0   0     0       0
#&gt;   B        0 25 0   0     0       0
#&gt;   C       10 10 0   0     0       0
#&gt;   D       10 10 0 180     0       0
#&gt;   birth    0  0 0   0     0       0
#&gt;   outside  0  0 0   0     0       0
#&gt; 
#&gt; 
#&gt; $stayer_assumption
#&gt; [1] TRUE
#&gt; 
#&gt; $match_pob_tot_method
#&gt; [1] "rescale"
#&gt; 
#&gt; $birth_non_negative
#&gt; [1] TRUE
#&gt; 
#&gt; $death_method
#&gt; [1] "proportion"
#&gt; 
#&gt; $od_flow
#&gt;      dest
#&gt; orig   A  B  C D Sum
#&gt;   A    0  0 50 0  50
#&gt;   B   35  0 25 0  60
#&gt;   C   10 10  0 0  20
#&gt;   D   10 10  0 0  20
#&gt;   Sum 55 20 75 0 150
#&gt; </div><div class='input'>
<span class='co'># international migration review paper example</span>
<span class='va'>s1</span><span class='op'>[</span>,<span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='fl'>20</span>, <span class='fl'>10</span>, <span class='fl'>20</span>, <span class='fl'>10</span>, <span class='fl'>55</span>, <span class='fl'>40</span>, <span class='fl'>25</span>, <span class='fl'>10</span>, <span class='fl'>25</span>, <span class='fl'>140</span>, <span class='fl'>20</span>, <span class='fl'>0</span>, <span class='fl'>10</span>, <span class='fl'>65</span>, <span class='fl'>200</span><span class='op'>)</span>
<span class='va'>s2</span><span class='op'>[</span>,<span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>70</span>, <span class='fl'>25</span>, <span class='fl'>10</span>, <span class='fl'>40</span>, <span class='fl'>30</span>, <span class='fl'>60</span>, <span class='fl'>55</span>, <span class='fl'>45</span>, <span class='fl'>10</span>, <span class='fl'>10</span>, <span class='fl'>140</span>, <span class='fl'>0</span>, <span class='fl'>10</span>, <span class='fl'>15</span>, <span class='fl'>50</span>, <span class='fl'>180</span><span class='op'>)</span>
<span class='fu'>ffs_demo</span><span class='op'>(</span>m1 <span class='op'>=</span> <span class='va'>s1</span>, m2 <span class='op'>=</span> <span class='va'>s2</span>, b_por <span class='op'>=</span> <span class='va'>b</span>, d_por <span class='op'>=</span> <span class='va'>d</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $flow
#&gt; , , pob = A
#&gt; 
#&gt;     dest
#&gt; orig        A        B          C        D
#&gt;    A 69.97555 19.99853 0.04130057 9.998155
#&gt;    B  0.00000 10.00214 0.00000000 0.000000
#&gt;    C  0.00000  0.00000 9.98432596 0.000000
#&gt;    D  0.00000  0.00000 0.00000000 0.000000
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;     dest
#&gt; orig         A         B      C        D
#&gt;    A 19.961779  0.000000  0.000 0.000000
#&gt;    B  0.000000 55.398318  0.000 0.000000
#&gt;    C  5.082765  4.730935 10.047 5.049044
#&gt;    D  0.000000  0.000000  0.000 9.980160
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;     dest
#&gt; orig        A           B            C        D
#&gt;    A 9.963367  0.06259027 3.087515e-03  0.00000
#&gt;    B 0.000000 40.11935070 0.000000e+00  0.00000
#&gt;    C 0.000000  0.00000000 1.401676e+02  0.00000
#&gt;    D 0.000000 14.63694990 7.220260e-01 49.82505
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;     dest
#&gt; orig         A         B C        D
#&gt;    A 19.984653  0.000000 0   0.0000
#&gt;    B  0.000000 24.982793 0   0.0000
#&gt;    C  9.969731  9.980899 0   0.0000
#&gt;    D 10.076411 10.087698 0 179.6678
#&gt; 
#&gt; 
#&gt; $y
#&gt; , , pob = A
#&gt; 
#&gt;          dest
#&gt; orig             A        B          C        D death outside
#&gt;   A       69.97555 19.99853 0.04130057 9.998155     0       0
#&gt;   B        0.00000 10.00214 0.00000000 0.000000     0       0
#&gt;   C        0.00000  0.00000 9.98432596 0.000000     0       0
#&gt;   D        0.00000  0.00000 0.00000000 0.000000     0       0
#&gt;   birth    0.00000  0.00000 0.00000000 0.000000     0       0
#&gt;   outside  0.00000  0.00000 0.00000000 0.000000     0       0
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;          dest
#&gt; orig              A         B      C        D death outside
#&gt;   A       19.961779  0.000000  0.000 0.000000     0       0
#&gt;   B        0.000000 55.398318  0.000 0.000000     0       0
#&gt;   C        5.082765  4.730935 10.047 5.049044     0       0
#&gt;   D        0.000000  0.000000  0.000 9.980160     0       0
#&gt;   birth    0.000000  0.000000  0.000 0.000000     0       0
#&gt;   outside  0.000000  0.000000  0.000 0.000000     0       0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;          dest
#&gt; orig             A           B            C        D death outside
#&gt;   A       9.963367  0.06259027 3.087515e-03  0.00000     0       0
#&gt;   B       0.000000 40.11935070 0.000000e+00  0.00000     0       0
#&gt;   C       0.000000  0.00000000 1.401676e+02  0.00000     0       0
#&gt;   D       0.000000 14.63694990 7.220260e-01 49.82505     0       0
#&gt;   birth   0.000000  0.00000000 0.000000e+00  0.00000     0       0
#&gt;   outside 0.000000  0.00000000 0.000000e+00  0.00000     0       0
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;          dest
#&gt; orig              A         B C        D death outside
#&gt;   A       19.984653  0.000000 0   0.0000     0       0
#&gt;   B        0.000000 24.982793 0   0.0000     0       0
#&gt;   C        9.969731  9.980899 0   0.0000     0       0
#&gt;   D       10.076411 10.087698 0 179.6678     0       0
#&gt;   birth    0.000000  0.000000 0   0.0000     0       0
#&gt;   outside  0.000000  0.000000 0   0.0000     0       0
#&gt; 
#&gt; 
#&gt; $stayer_assumption
#&gt; [1] TRUE
#&gt; 
#&gt; $match_pob_tot_method
#&gt; [1] "rescale"
#&gt; 
#&gt; $birth_non_negative
#&gt; [1] TRUE
#&gt; 
#&gt; $death_method
#&gt; [1] "proportion"
#&gt; 
#&gt; $od_flow
#&gt;      dest
#&gt; orig         A        B          C         D       Sum
#&gt;   A    0.00000 20.06112 0.04438808  9.998155  30.10366
#&gt;   B    0.00000  0.00000 0.00000000  0.000000   0.00000
#&gt;   C   15.05250 14.71183 0.00000000  5.049044  34.81337
#&gt;   D   10.07641 24.72465 0.72202599  0.000000  35.52308
#&gt;   Sum 25.12891 59.49760 0.76641407 15.047199 100.44012
#&gt; </div><div class='input'>
<span class='co'># international migration review supp. material example</span>
<span class='va'>dm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>5</span>, <span class='fl'>50</span>, <span class='fl'>500</span>, <span class='fl'>5</span>, <span class='fl'>0</span>, <span class='fl'>45</span>, <span class='fl'>495</span>, <span class='fl'>50</span>, <span class='fl'>45</span>, <span class='fl'>0</span>, <span class='fl'>450</span>, <span class='fl'>500</span>, <span class='fl'>495</span>, <span class='fl'>450</span>, <span class='fl'>0</span><span class='op'>)</span>, 
             nrow <span class='op'>=</span> <span class='fl'>4</span>, ncol <span class='op'>=</span> <span class='fl'>4</span>, byrow <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/dimnames.html'>dimnames</a></span><span class='op'>(</span><span class='va'>dm</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>orig <span class='op'>=</span> <span class='va'>reg</span>, dest <span class='op'>=</span> <span class='va'>reg</span><span class='op'>)</span>
<span class='fu'>ffs_demo</span><span class='op'>(</span>m1 <span class='op'>=</span> <span class='va'>s1</span>, m2 <span class='op'>=</span> <span class='va'>s2</span>, b_por <span class='op'>=</span> <span class='va'>b</span>, d_por <span class='op'>=</span> <span class='va'>d</span>, m <span class='op'>=</span> <span class='va'>dm</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $flow
#&gt; , , pob = A
#&gt; 
#&gt;     dest
#&gt; orig        A           B        C           D
#&gt;    A 70.37889 19.81927767 0.000000 9.973302073
#&gt;    B  0.00000 10.04225735 0.000000 0.000000000
#&gt;    C  0.00000  0.05684745 9.976561 0.002860633
#&gt;    D  0.00000  0.00000000 0.000000 0.000000000
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;     dest
#&gt; orig         A         B        C        D
#&gt;    A 19.917879  0.000000  0.00000 0.000000
#&gt;    B  0.000000 55.410664  0.00000 0.000000
#&gt;    C  5.156388  4.707128 10.02342 5.057943
#&gt;    D  0.000000  0.000000  0.00000 9.976581
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;     dest
#&gt; orig          A        B            C        D
#&gt;    A 9.98110783  0.00000 0.000000e+00  0.00000
#&gt;    B 0.00000000 40.02451 0.000000e+00  0.00000
#&gt;    C 0.00000000  0.00000 1.400023e+02  0.00000
#&gt;    D 0.02581451 14.95828 6.799172e-03 50.00124
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;     dest
#&gt; orig         A         B C        D
#&gt;    A 19.965709  0.000000 0   0.0000
#&gt;    B  0.000000 25.019696 0   0.0000
#&gt;    C 10.264289  9.739533 0   0.0000
#&gt;    D  9.794964 10.223623 0 179.9922
#&gt; 
#&gt; 
#&gt; $y
#&gt; , , pob = A
#&gt; 
#&gt;          dest
#&gt; orig             A           B        C           D death outside
#&gt;   A       70.37889 19.81927767 0.000000 9.973302073     0       0
#&gt;   B        0.00000 10.04225735 0.000000 0.000000000     0       0
#&gt;   C        0.00000  0.05684745 9.976561 0.002860633     0       0
#&gt;   D        0.00000  0.00000000 0.000000 0.000000000     0       0
#&gt;   birth    0.00000  0.00000000 0.000000 0.000000000     0       0
#&gt;   outside  0.00000  0.00000000 0.000000 0.000000000     0       0
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;          dest
#&gt; orig              A         B        C        D death outside
#&gt;   A       19.917879  0.000000  0.00000 0.000000     0       0
#&gt;   B        0.000000 55.410664  0.00000 0.000000     0       0
#&gt;   C        5.156388  4.707128 10.02342 5.057943     0       0
#&gt;   D        0.000000  0.000000  0.00000 9.976581     0       0
#&gt;   birth    0.000000  0.000000  0.00000 0.000000     0       0
#&gt;   outside  0.000000  0.000000  0.00000 0.000000     0       0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;          dest
#&gt; orig               A        B            C        D death outside
#&gt;   A       9.98110783  0.00000 0.000000e+00  0.00000     0       0
#&gt;   B       0.00000000 40.02451 0.000000e+00  0.00000     0       0
#&gt;   C       0.00000000  0.00000 1.400023e+02  0.00000     0       0
#&gt;   D       0.02581451 14.95828 6.799172e-03 50.00124     0       0
#&gt;   birth   0.00000000  0.00000 0.000000e+00  0.00000     0       0
#&gt;   outside 0.00000000  0.00000 0.000000e+00  0.00000     0       0
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;          dest
#&gt; orig              A         B C        D death outside
#&gt;   A       19.965709  0.000000 0   0.0000     0       0
#&gt;   B        0.000000 25.019696 0   0.0000     0       0
#&gt;   C       10.264289  9.739533 0   0.0000     0       0
#&gt;   D        9.794964 10.223623 0 179.9922     0       0
#&gt;   birth    0.000000  0.000000 0   0.0000     0       0
#&gt;   outside  0.000000  0.000000 0   0.0000     0       0
#&gt; 
#&gt; 
#&gt; $stayer_assumption
#&gt; [1] TRUE
#&gt; 
#&gt; $match_pob_tot_method
#&gt; [1] "rescale"
#&gt; 
#&gt; $birth_non_negative
#&gt; [1] TRUE
#&gt; 
#&gt; $death_method
#&gt; [1] "proportion"
#&gt; 
#&gt; $od_flow
#&gt;      dest
#&gt; orig          A        B           C         D      Sum
#&gt;   A    0.000000 19.81928 0.000000000  9.973302 29.79258
#&gt;   B    0.000000  0.00000 0.000000000  0.000000  0.00000
#&gt;   C   15.420677 14.50351 0.000000000  5.060804 34.98499
#&gt;   D    9.820779 25.18190 0.006799172  0.000000 35.00948
#&gt;   Sum 25.241456 59.50469 0.006799172 15.034106 99.78705
#&gt; </div><div class='input'>
<span class='co'>##</span>
<span class='co'>## with births and deaths over period</span>
<span class='co'>##</span>
<span class='co'># demographic research paper example</span>
<span class='va'>s1</span><span class='op'>[</span>,<span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1000</span>, <span class='fl'>55</span>, <span class='fl'>80</span>, <span class='fl'>20</span>, <span class='fl'>100</span>, <span class='fl'>555</span>, <span class='fl'>40</span>, <span class='fl'>25</span>, <span class='fl'>10</span>, <span class='fl'>50</span>, <span class='fl'>800</span>, <span class='fl'>20</span>, <span class='fl'>0</span>, <span class='fl'>5</span>, <span class='fl'>40</span>, <span class='fl'>200</span><span class='op'>)</span>
<span class='va'>s2</span><span class='op'>[</span>,<span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1060</span>, <span class='fl'>45</span>, <span class='fl'>70</span>, <span class='fl'>30</span>, <span class='fl'>60</span>, <span class='fl'>540</span>, <span class='fl'>75</span>, <span class='fl'>30</span>, <span class='fl'>10</span>, <span class='fl'>40</span>, <span class='fl'>770</span>, <span class='fl'>20</span>, <span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>70</span>, <span class='fl'>230</span><span class='op'>)</span>
<span class='va'>b</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>80</span>, <span class='fl'>20</span>, <span class='fl'>40</span>, <span class='fl'>60</span><span class='op'>)</span>
<span class='va'>d</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>70</span>, <span class='fl'>30</span>, <span class='fl'>50</span>, <span class='fl'>10</span><span class='op'>)</span>
<span class='fu'>ffs_demo</span><span class='op'>(</span>m1 <span class='op'>=</span> <span class='va'>s1</span>, m2 <span class='op'>=</span> <span class='va'>s2</span>, b_por <span class='op'>=</span> <span class='va'>b</span>, d_por <span class='op'>=</span> <span class='va'>d</span>, match_pob_tot_method <span class='op'>=</span> <span class='st'>"open-dr"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $flow
#&gt; , , pob = A
#&gt; 
#&gt;     dest
#&gt; orig         A        B         C        D
#&gt;    A 939.39394  0.00000 0.0000000 0.000000
#&gt;    B  26.42296 59.13165 0.4234563 9.855274
#&gt;    C   0.00000  0.00000 9.4318182 0.000000
#&gt;    D   0.00000  0.00000 0.0000000 0.000000
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;     dest
#&gt; orig  A          B  C D
#&gt;    A 45   4.187249  0 0
#&gt;    B  0 506.350996  0 0
#&gt;    C  0   4.895986 40 0
#&gt;    D  0   4.565768  0 0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;     dest
#&gt; orig        A         B        C         D
#&gt;    A 67.14057  4.315617   0.0000  3.695332
#&gt;    B  0.00000 38.333333   0.0000  0.000000
#&gt;    C  0.00000 29.287371 700.1802 25.077888
#&gt;    D  0.00000  0.000000   0.0000 38.367347
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;     dest
#&gt; orig        A         B         C   D
#&gt;    A 18.53239  0.000000  0.000000   0
#&gt;    B  0.00000 23.632527  0.000000   0
#&gt;    C  0.00000  0.000000 18.607113   0
#&gt;    D 11.46761  6.367473  1.392887 170
#&gt; 
#&gt; 
#&gt; $y
#&gt; , , pob = A
#&gt; 
#&gt;          dest
#&gt; orig              A        B         C        D      death    outside
#&gt;   A       939.39394  0.00000 0.0000000 0.000000 60.6060606 14.1831046
#&gt;   B        26.42296 59.13165 0.4234563 9.855274  4.1666667  0.8683533
#&gt;   C         0.00000  0.00000 9.4318182 0.000000  0.5681818  0.1447256
#&gt;   D         0.00000  0.00000 0.0000000 0.000000  0.0000000  0.1447256
#&gt;   birth    80.00000  0.00000 0.0000000 0.000000  0.0000000  0.0000000
#&gt;   outside   0.00000  0.00000 0.0000000 0.000000  0.0000000  0.0000000
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;          dest
#&gt; orig              A          B         C       D      death outside
#&gt;   A       45.000000   4.187249  0.000000 0.00000  3.3333333       0
#&gt;   B        0.000000 506.350996  0.000000 0.00000 23.1250000       0
#&gt;   C        0.000000   4.895986 40.000000 0.00000  2.8409091       0
#&gt;   D        0.000000   4.565768  0.000000 0.00000  0.2040816       0
#&gt;   birth    0.000000  20.000000  0.000000 0.00000  0.0000000       0
#&gt;   outside  2.479418  25.524004  2.263105 0.23015  0.0000000       0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;          dest
#&gt; orig             A         B        C         D     death   outside
#&gt;   A       67.14057  4.315617   0.0000  3.695332  4.848485  2.859433
#&gt;   B        0.00000 38.333333   0.0000  0.000000  1.666667  3.063679
#&gt;   C        0.00000 29.287371 700.1802 25.077888 45.454545 29.819805
#&gt;   D        0.00000  0.000000   0.0000 38.367347  1.632653  2.859433
#&gt;   birth    0.00000  0.000000  40.0000  0.000000  0.000000  0.000000
#&gt;   outside  0.00000  0.000000   0.0000  0.000000  0.000000  0.000000
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;          dest
#&gt; orig               A          B          C         D    death outside
#&gt;   A       18.5323852  0.0000000  0.0000000   0.00000 1.212121       0
#&gt;   B        0.0000000 23.6325274  0.0000000   0.00000 1.041667       0
#&gt;   C        0.0000000  0.0000000 18.6071125   0.00000 1.136364       0
#&gt;   D       11.4676148  6.3674726  1.3928875 170.00000 8.163265       0
#&gt;   birth    0.0000000  0.0000000  0.0000000  60.00000 0.000000       0
#&gt;   outside  0.2554936  0.3258059  0.2565238   2.60876 0.000000       0
#&gt; 
#&gt; 
#&gt; $stayer_assumption
#&gt; [1] TRUE
#&gt; 
#&gt; $match_pob_tot_method
#&gt; [1] "open-dr"
#&gt; 
#&gt; $birth_non_negative
#&gt; [1] TRUE
#&gt; 
#&gt; $death_method
#&gt; [1] "proportion"
#&gt; 
#&gt; $od_flow
#&gt;      dest
#&gt; orig         A         B         C         D       Sum
#&gt;   A    0.00000  8.502866 0.0000000  3.695332  12.19820
#&gt;   B   26.42296  0.000000 0.4234563  9.855274  36.70169
#&gt;   C    0.00000 34.183358 0.0000000 25.077888  59.26125
#&gt;   D   11.46761 10.933241 1.3928875  0.000000  23.79374
#&gt;   Sum 37.89057 53.619464 1.8163437 38.628494 131.95487
#&gt; </div><div class='input'><span class='co'># makes more sense to use this method</span>
<span class='fu'>ffs_demo</span><span class='op'>(</span>m1 <span class='op'>=</span> <span class='va'>s1</span>, m2 <span class='op'>=</span> <span class='va'>s2</span>, b_por <span class='op'>=</span> <span class='va'>b</span>, d_por <span class='op'>=</span> <span class='va'>d</span>, match_pob_tot_method <span class='op'>=</span> <span class='st'>"open"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $flow
#&gt; , , pob = A
#&gt; 
#&gt;     dest
#&gt; orig         A        B         C  D
#&gt;    A 939.39394  0.00000 0.0000000  0
#&gt;    B  26.81098 58.59268 0.4296748 10
#&gt;    C   0.00000  0.00000 9.4318182  0
#&gt;    D   0.00000  0.00000 0.0000000  0
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;     dest
#&gt; orig  A          B  C D
#&gt;    A 45   4.398319  0 0
#&gt;    B  0 505.662981  0 0
#&gt;    C  0   5.142782 40 0
#&gt;    D  0   4.795918  0 0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;     dest
#&gt; orig        A         B        C         D
#&gt;    A 66.79939  4.499413   0.0000  3.852711
#&gt;    B  0.00000 38.333333   0.0000  0.000000
#&gt;    C  0.00000 30.534684 697.8648 26.145924
#&gt;    D  0.00000  0.000000   0.0000 38.367347
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;     dest
#&gt; orig        A         B        C   D
#&gt;    A 18.37429  0.000000  0.00000   0
#&gt;    B  0.00000 23.544743  0.00000   0
#&gt;    C  0.00000  0.000000 18.58791   0
#&gt;    D 11.62571  6.455257  1.41209 170
#&gt; 
#&gt; 
#&gt; $y
#&gt; , , pob = A
#&gt; 
#&gt;          dest
#&gt; orig              A        B         C  D      death    outside
#&gt;   A       939.39394  0.00000 0.0000000  0 60.6060606 13.7950812
#&gt;   B        26.81098 58.59268 0.4296748 10  4.1666667  1.4073208
#&gt;   C         0.00000  0.00000 9.4318182  0  0.5681818  0.1385071
#&gt;   D         0.00000  0.00000 0.0000000  0  0.0000000  0.0000000
#&gt;   birth    80.00000  0.00000 0.0000000  0  0.0000000  0.0000000
#&gt;   outside   0.00000  0.00000 0.0000000  0  0.0000000  0.0000000
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;          dest
#&gt; orig              A          B         C D      death outside
#&gt;   A       45.000000   4.398319  0.000000 0  3.3333333       0
#&gt;   B        0.000000 505.662981  0.000000 0 23.1250000       0
#&gt;   C        0.000000   5.142782 40.000000 0  2.8409091       0
#&gt;   D        0.000000   4.795918  0.000000 0  0.2040816       0
#&gt;   birth    0.000000  20.000000  0.000000 0  0.0000000       0
#&gt;   outside  2.268348  26.212019  2.016309 0  0.0000000       0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;          dest
#&gt; orig             A         B        C         D     death   outside
#&gt;   A       66.79939  4.499413   0.0000  3.852711  4.848485  3.200610
#&gt;   B        0.00000 38.333333   0.0000  0.000000  1.666667  1.632569
#&gt;   C        0.00000 30.534684 697.8648 26.145924 45.454545 32.135154
#&gt;   D        0.00000  0.000000   0.0000 38.367347  1.632653  1.634018
#&gt;   birth    0.00000  0.000000  40.0000  0.000000  0.000000  0.000000
#&gt;   outside  0.00000  0.000000   0.0000  0.000000  0.000000  0.000000
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;          dest
#&gt; orig             A         B          C          D    death outside
#&gt;   A       18.37429  0.000000  0.0000000   0.000000 1.212121       0
#&gt;   B        0.00000 23.544743  0.0000000   0.000000 1.041667       0
#&gt;   C        0.00000  0.000000 18.5879097   0.000000 1.136364       0
#&gt;   D       11.62571  6.455257  1.4120903 170.000000 8.163265       0
#&gt;   birth    0.00000  0.000000  0.0000000  60.000000 0.000000       0
#&gt;   outside  0.41359  0.413590  0.2757267   2.343677 0.000000       0
#&gt; 
#&gt; 
#&gt; $stayer_assumption
#&gt; [1] TRUE
#&gt; 
#&gt; $match_pob_tot_method
#&gt; [1] "open"
#&gt; 
#&gt; $birth_non_negative
#&gt; [1] TRUE
#&gt; 
#&gt; $death_method
#&gt; [1] "proportion"
#&gt; 
#&gt; $od_flow
#&gt;      dest
#&gt; orig         A         B         C         D       Sum
#&gt;   A    0.00000  8.897732 0.0000000  3.852711  12.75044
#&gt;   B   26.81098  0.000000 0.4296748 10.000000  37.24065
#&gt;   C    0.00000 35.677466 0.0000000 26.145924  61.82339
#&gt;   D   11.62571 11.251175 1.4120903  0.000000  24.28898
#&gt;   Sum 38.43669 55.826373 1.8417650 39.998635 136.10346
#&gt; </div><div class='input'>
<span class='co'># science paper  supp. material example</span>
<span class='va'>b</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>80</span>, <span class='fl'>20</span>, <span class='fl'>60</span>, <span class='fl'>60</span><span class='op'>)</span>
<span class='fu'>ffs_demo</span><span class='op'>(</span>m1 <span class='op'>=</span> <span class='va'>s1</span>, m2 <span class='op'>=</span> <span class='va'>s2</span>, b_por <span class='op'>=</span> <span class='va'>b</span>, d_por <span class='op'>=</span> <span class='va'>d</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $flow
#&gt; , , pob = A
#&gt; 
#&gt;     dest
#&gt; orig         A        B        C       D
#&gt;    A 942.46268  0.00000 0.000000 0.00000
#&gt;    B  34.10724 56.49634 0.583247 9.81133
#&gt;    C   0.00000  0.00000 9.366678 0.00000
#&gt;    D   0.00000  0.00000 0.000000 0.00000
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;     dest
#&gt; orig            A          B        C D
#&gt;    A 48.389330144   0.000000  0.00000 0
#&gt;    B  0.000000000 523.535673  0.00000 0
#&gt;    C  0.002843014   0.751389 42.98745 0
#&gt;    D  0.017272875   4.565102  0.00000 0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;     dest
#&gt; orig       A         B        C         D
#&gt;    A 69.7374  3.327696   0.0000  3.240618
#&gt;    B  0.0000 40.906604   0.0000  0.000000
#&gt;    C  0.0000 26.404335 706.6268 25.713389
#&gt;    D  0.0000  0.000000   0.0000 39.743008
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;     dest
#&gt; orig        A         B         C        D
#&gt;    A 18.30537  0.000000  0.000000   0.0000
#&gt;    B  0.00000 24.533233  0.000000   0.0000
#&gt;    C  0.00000  0.000000 18.201909   0.0000
#&gt;    D 12.41690  4.511449  2.259055 171.4956
#&gt; 
#&gt; 
#&gt; $y
#&gt; , , pob = A
#&gt; 
#&gt;          dest
#&gt; orig              A        B        C       D      death outside
#&gt;   A       942.46268  0.00000 0.000000 0.00000 60.6101255       0
#&gt;   B        34.10724 56.49634 0.583247 9.81133  4.1666667       0
#&gt;   C         0.00000  0.00000 9.366678 0.00000  0.5681818       0
#&gt;   D         0.00000  0.00000 0.000000 0.00000  0.0000000       0
#&gt;   birth    80.00000  0.00000 0.000000 0.00000  0.0000000       0
#&gt;   outside   0.00000  0.00000 0.000000 0.00000  0.0000000       0
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;          dest
#&gt; orig                 A          B        C D      death outside
#&gt;   A       48.389330144   0.000000  0.00000 0  3.3318910       0
#&gt;   B        0.000000000 523.535673  0.00000 0 23.1250000       0
#&gt;   C        0.002843014   0.751389 42.98745 0  2.8409091       0
#&gt;   D        0.017272875   4.565102  0.00000 0  0.2040816       0
#&gt;   birth    0.000000000  20.000000  0.00000 0  0.0000000       0
#&gt;   outside  0.000000000   0.000000  0.00000 0  0.0000000       0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;          dest
#&gt; orig            A         B        C         D     death outside
#&gt;   A       69.7374  3.327696   0.0000  3.240618  4.846387       0
#&gt;   B        0.0000 40.906604   0.0000  0.000000  1.666667       0
#&gt;   C        0.0000 26.404335 706.6268 25.713389 45.454545       0
#&gt;   D        0.0000  0.000000   0.0000 39.743008  1.632653       0
#&gt;   birth    0.0000  0.000000  60.0000  0.000000  0.000000       0
#&gt;   outside  0.0000  0.000000   0.0000  0.000000  0.000000       0
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;          dest
#&gt; orig             A         B         C        D    death outside
#&gt;   A       18.30537  0.000000  0.000000   0.0000 1.211597       0
#&gt;   B        0.00000 24.533233  0.000000   0.0000 1.041667       0
#&gt;   C        0.00000  0.000000 18.201909   0.0000 1.136364       0
#&gt;   D       12.41690  4.511449  2.259055 171.4956 8.163265       0
#&gt;   birth    0.00000  0.000000  0.000000  60.0000 0.000000       0
#&gt;   outside  0.00000  0.000000  0.000000   0.0000 0.000000       0
#&gt; 
#&gt; 
#&gt; $stayer_assumption
#&gt; [1] TRUE
#&gt; 
#&gt; $match_pob_tot_method
#&gt; [1] "rescale"
#&gt; 
#&gt; $birth_non_negative
#&gt; [1] TRUE
#&gt; 
#&gt; $death_method
#&gt; [1] "proportion"
#&gt; 
#&gt; $od_flow
#&gt;      dest
#&gt; orig             A         B        C         D        Sum
#&gt;   A    0.000000000  3.327696 0.000000  3.240618   6.568314
#&gt;   B   34.107236105  0.000000 0.583247  9.811330  44.501813
#&gt;   C    0.002843014 27.155724 0.000000 25.713389  52.871956
#&gt;   D   12.434176193  9.076551 2.259055  0.000000  23.769782
#&gt;   Sum 46.544255312 39.559971 2.842302 38.765337 127.711866
#&gt; </div><div class='input'>
<span class='co'># international migration review supp. material example</span>
<span class='va'>s1</span><span class='op'>[</span>,<span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='fl'>20</span>, <span class='fl'>10</span>, <span class='fl'>20</span>, <span class='fl'>10</span>, <span class='fl'>55</span>, <span class='fl'>40</span>, <span class='fl'>25</span>, <span class='fl'>10</span>, <span class='fl'>25</span>, <span class='fl'>140</span>, <span class='fl'>20</span>, <span class='fl'>0</span>, <span class='fl'>10</span>, <span class='fl'>65</span>, <span class='fl'>200</span><span class='op'>)</span>
<span class='va'>s2</span><span class='op'>[</span>,<span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>75</span>, <span class='fl'>20</span>, <span class='fl'>30</span>, <span class='fl'>30</span>, <span class='fl'>25</span>, <span class='fl'>45</span>, <span class='fl'>40</span>, <span class='fl'>30</span>, <span class='fl'>5</span>, <span class='fl'>30</span>, <span class='fl'>150</span>, <span class='fl'>20</span>, <span class='fl'>0</span>, <span class='fl'>15</span>, <span class='fl'>60</span>, <span class='fl'>230</span><span class='op'>)</span>
<span class='va'>b</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>50</span>, <span class='fl'>25</span>, <span class='fl'>60</span><span class='op'>)</span>
<span class='va'>d</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>30</span>, <span class='fl'>10</span>, <span class='fl'>40</span>, <span class='fl'>10</span><span class='op'>)</span>
<span class='fu'>ffs_demo</span><span class='op'>(</span>m1 <span class='op'>=</span> <span class='va'>s1</span>, m2 <span class='op'>=</span> <span class='va'>s2</span>, b_por <span class='op'>=</span> <span class='va'>b</span>, d_por <span class='op'>=</span> <span class='va'>d</span><span class='op'>)</span>
</div><div class='output co'>#&gt; $flow
#&gt; , , pob = A
#&gt; 
#&gt;     dest
#&gt; orig        A        B        C D
#&gt;    A 68.73684 8.258457 0.000000 0
#&gt;    B  0.00000 8.120586 0.000000 0
#&gt;    C  0.00000 1.051386 5.675578 0
#&gt;    D  0.00000 0.000000 0.000000 0
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;     dest
#&gt; orig         A        B        C        D
#&gt;    A 17.058087  0.00000  0.00000 0.000000
#&gt;    B  2.495671 28.68482 12.76128 5.780648
#&gt;    C  0.000000  0.00000 18.72239 0.000000
#&gt;    D  0.000000  0.00000  0.00000 9.417525
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;     dest
#&gt; orig         A        B          C        D
#&gt;    A  9.318430  0.00000   0.000000  0.00000
#&gt;    B 10.706236 23.92586   4.876536  0.00000
#&gt;    C  0.000000  0.00000 114.549126  0.00000
#&gt;    D  7.192126  0.00000   3.275910 56.41139
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;     dest
#&gt; orig         A        B         C        D
#&gt;    A 17.092733  0.00000  0.000000   0.0000
#&gt;    B  2.132977 19.46418  1.049853   0.0000
#&gt;    C  0.000000  0.00000 15.008335   0.0000
#&gt;    D 10.296176  0.00000  5.067787 173.3691
#&gt; 
#&gt; 
#&gt; $y
#&gt; , , pob = A
#&gt; 
#&gt;          dest
#&gt; orig             A        B        C D      death outside
#&gt;   A       68.73684 8.258457 0.000000 0 20.0332226       0
#&gt;   B        0.00000 8.120586 0.000000 0  0.7692308       0
#&gt;   C        0.00000 1.051386 5.675578 0  2.0512821       0
#&gt;   D        0.00000 0.000000 0.000000 0  0.0000000       0
#&gt;   birth   10.00000 0.000000 0.000000 0  0.0000000       0
#&gt;   outside  0.00000 0.000000 0.000000 0  0.0000000       0
#&gt; 
#&gt; , , pob = B
#&gt; 
#&gt;          dest
#&gt; orig              A        B        C         D     death outside
#&gt;   A       17.058087  0.00000  0.00000  0.000000 3.9867110       0
#&gt;   B        2.495671 28.68482 12.76128  5.780648 4.2307692       0
#&gt;   C        0.000000  0.00000 18.72239  0.000000 5.1282051       0
#&gt;   D        0.000000  0.00000  0.00000  9.417525 0.3636364       0
#&gt;   birth    8.960573 15.94982 14.33692 10.752688 0.0000000       0
#&gt;   outside  0.000000  0.00000  0.00000  0.000000 0.0000000       0
#&gt; 
#&gt; , , pob = C
#&gt; 
#&gt;          dest
#&gt; orig              A        B          C        D     death outside
#&gt;   A        9.318430  0.00000   0.000000  0.00000  1.993355       0
#&gt;   B       10.706236 23.92586   4.876536  0.00000  3.076923       0
#&gt;   C        0.000000  0.00000 114.549126  0.00000 28.717949       0
#&gt;   D        7.192126  0.00000   3.275910 56.41139  2.363636       0
#&gt;   birth    0.000000  0.00000  25.000000  0.00000  0.000000       0
#&gt;   outside  0.000000  0.00000   0.000000  0.00000  0.000000       0
#&gt; 
#&gt; , , pob = D
#&gt; 
#&gt;          dest
#&gt; orig              A        B         C        D    death outside
#&gt;   A       17.092733  0.00000  0.000000   0.0000 3.986711       0
#&gt;   B        2.132977 19.46418  1.049853   0.0000 1.923077       0
#&gt;   C        0.000000  0.00000 15.008335   0.0000 4.102564       0
#&gt;   D       10.296176  0.00000  5.067787 173.3691 7.272727       0
#&gt;   birth    0.000000  0.00000  0.000000  60.0000 0.000000       0
#&gt;   outside  0.000000  0.00000  0.000000   0.0000 0.000000       0
#&gt; 
#&gt; 
#&gt; $stayer_assumption
#&gt; [1] TRUE
#&gt; 
#&gt; $match_pob_tot_method
#&gt; [1] "rescale"
#&gt; 
#&gt; $birth_non_negative
#&gt; [1] TRUE
#&gt; 
#&gt; $death_method
#&gt; [1] "proportion"
#&gt; 
#&gt; $od_flow
#&gt;      dest
#&gt; orig         A        B         C        D       Sum
#&gt;   A    0.00000 8.258457  0.000000 0.000000  8.258457
#&gt;   B   15.33488 0.000000 18.687672 5.780648 39.803204
#&gt;   C    0.00000 1.051386  0.000000 0.000000  1.051386
#&gt;   D   17.48830 0.000000  8.343697 0.000000 25.831999
#&gt;   Sum 32.82319 9.309843 27.031369 5.780648 74.945047
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Guy J. Abel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


