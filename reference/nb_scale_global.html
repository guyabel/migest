<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Scale native born populations to match global differences in births and deaths over period — nb_scale_global • migest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Scale native born populations to match global differences in births and deaths over period — nb_scale_global"><meta name="description" content="This function is predominantly intended to be used within the ffs routines in the migest package. Adjustment to ensure that global differences in stocks match the global demographic changes from births and deaths."><meta property="og:description" content="This function is predominantly intended to be used within the ffs routines in the migest package. Adjustment to ensure that global differences in stocks match the global demographic changes from births and deaths."><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-2XE3QBSNZJ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2XE3QBSNZJ');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">migest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/guyabel/migest/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/guyabelguyabel"><span class="fa fab fa-twitter fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://guyabel.com"><span class="fa fas fa-home fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Scale native born populations to match global differences in births and deaths over period</h1>
      <small class="dont-index">Source: <a href="https://github.com/guyabel/migest/blob/master/R/nb_scale_global.R" class="external-link"><code>R/nb_scale_global.R</code></a></small>
      <div class="d-none name"><code>nb_scale_global.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is predominantly intended to be used within the ffs routines in the migest package. Adjustment to ensure that global differences in stocks match the global demographic changes from births and deaths.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nb_scale_global</span><span class="op">(</span><span class="va">m1</span>, <span class="va">m2</span>, <span class="va">b</span>, <span class="va">d</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-m-">m1<a class="anchor" aria-label="anchor" href="#arg-m-"></a></dt>
<dd><p>Matrix of migrant stock totals at time <em>t</em>. Rows in the matrix correspond to place of birth and columns to place of residence at time <em>t</em></p></dd>


<dt id="arg-m-">m2<a class="anchor" aria-label="anchor" href="#arg-m-"></a></dt>
<dd><p>Matrix of migrant stock totals at time <em>t</em>+1. Rows in the matrix correspond to place of birth and columns to place of residence at time <em>t</em>+1.</p></dd>


<dt id="arg-b">b<a class="anchor" aria-label="anchor" href="#arg-b"></a></dt>
<dd><p>Vector of the number of births between time <em>t</em> and <em>t</em>+1 in each region.</p></dd>


<dt id="arg-d">d<a class="anchor" aria-label="anchor" href="#arg-d"></a></dt>
<dd><p>Vector of the number of deaths between time <em>t</em> and <em>t</em>+1 in each region.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical value to indicate the print the parameter estimates at each iteration. By default <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List with adjusted <code>m1</code> and <code>m2</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="ffs_demo.html">ffs_demo</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Guy J. Abel</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co">## cant have examples if function not in namespace - i.e. without export </span></span></span>
<span class="r-in"><span><span class="co">## so comment all out for own use</span></span></span>
<span class="r-in"><span><span class="co"># r &lt;- LETTERS[1:4]</span></span></span>
<span class="r-in"><span><span class="co"># P1 &lt;- matrix(data = c(1000, 100, 10, 0, 55, 555, 50, 5, 80, 40, 800, 40, 20, 25, 20, 200),</span></span></span>
<span class="r-in"><span><span class="co">#              nrow = 4, ncol = 4, dimnames = list(birth = r, dest = r), byrow = TRUE)</span></span></span>
<span class="r-in"><span><span class="co"># P2 &lt;- matrix(data = c(950, 100, 60, 0, 80, 505, 75, 5, 90, 30, 800, 40, 40, 45, 0, 180),</span></span></span>
<span class="r-in"><span><span class="co">#              nrow = 4, ncol = 4, dimnames = list(birth = r, dest = r), byrow = TRUE)</span></span></span>
<span class="r-in"><span><span class="co"># # display with row and col totals</span></span></span>
<span class="r-in"><span><span class="co"># addmargins(A = P1)</span></span></span>
<span class="r-in"><span><span class="co"># addmargins(A = P2)</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># # births and deaths</span></span></span>
<span class="r-in"><span><span class="co"># b &lt;- rep(x = 10, 4)</span></span></span>
<span class="r-in"><span><span class="co"># d &lt;- rep(x = 5, 4)</span></span></span>
<span class="r-in"><span><span class="co"># # no change in stocks, but 20 more births than deaths...</span></span></span>
<span class="r-in"><span><span class="co"># sum(P2) - sum(P1) + sum(d) - sum(b)</span></span></span>
<span class="r-in"><span><span class="co"># # scale</span></span></span>
<span class="r-in"><span><span class="co"># y &lt;- nb_scale_global (m1 = P1, m2 = P2, b = b, d = d)</span></span></span>
<span class="r-in"><span><span class="co"># y</span></span></span>
<span class="r-in"><span><span class="co"># sum(y$m2_adj) - sum(y$m1_adj) + sum(d) - sum(b)</span></span></span>
<span class="r-in"><span><span class="co"># </span></span></span>
<span class="r-in"><span><span class="co"># # check for when extra is positive and odd</span></span></span>
<span class="r-in"><span><span class="co"># d[1] &lt;- 32</span></span></span>
<span class="r-in"><span><span class="co"># d</span></span></span>
<span class="r-in"><span><span class="co"># sum(P2 - P1) - sum(b - d)</span></span></span>
<span class="r-in"><span><span class="co"># # scale</span></span></span>
<span class="r-in"><span><span class="co"># y &lt;- nb_scale_global(m1 = P1, m2 = P2, b = b, d = d)</span></span></span>
<span class="r-in"><span><span class="co"># sum(y$m2_adj) - sum(y$m1_adj) + sum(d) - sum(b)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Guy J. Abel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

